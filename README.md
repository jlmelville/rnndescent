# rnndescent

An R package implementing the Nearest Neighbor Descent method 
([Dong et al., 2011](https://doi.org/10.1145/1963405.1963487)) for finding
approximate nearest neighbors, based on the Python library 
[PyNNDescent](https://github.com/lmcinnes/pynndescent).

## Current Status

Still heavily in development, but possibly not totally useless for optimizing
an initial set of nearest neighbors, e.g. those generated by 
[RcppAnnoy](https://cran.r-project.org/package=RcppAnnoy) or 
[RcppHNSW](https://cran.r-project.org/package=RcppHNSW).

## Installation

```r
remotes::install_github("jlmelville/rnndescent")
```

## Example

Optimizing an initial set of approximate nearest neighbors:

```R
library(RcppHNSW)
library(rnndescent)

irism <- as.matrix(iris[, -5])
iris_hnsw_nn < hnsw_knn(irism, k = 15)

res <- nn_descent(irism, iris_hnsw_nn$idx, iris_hnsw_nn$dist, metric = "euclidean", verbose = TRUE)
```

Currently, only the nearest neighbor descent part of PyNNDescent is implemented,
not the random projection tree method to create the initial set of neighbors. If
you really wish to avoid any dependencies from another library, the only option
is to start from a random set of neighbors, although this isn't a particularly great
idea:

```R
library(rnndescent)

irism <- as.matrix(iris[, -5])

# picks indices at random and then carries out nearest neighbor descent 
res <- nnd_knn(irism, k = 15, metric = "euclidean")
```

This is slow, and might converge to a sub-optimal solution.

## Supported Metrics

Euclidean, Manhattan, Cosine and Hamming. Note that these have been implemented
in a simple fashion, so no clever (but non-portable) optimizations using 
AVX/SSE or specialized `popcount` routines are used.


## Citation

Dong, W., Moses, C., & Li, K. (2011, March). 
Efficient k-nearest neighbor graph construction for generic similarity measures. 
In *Proceedings of the 20th international conference on World wide web* (pp. 577-586). ACM.
[doi.org/10.1145/1963405.1963487](https://doi.org/10.1145/1963405.1963487).

## License

[GPLv3 or later](https://www.gnu.org/licenses/gpl-3.0.txt).

## See Also

* [PyNNDescent](https://github.com/lmcinnes/pynndescent), the Python implementation.
* [nndescent](https://github.com/TatsuyaShirakawa/nndescent), a C++ implementation.
* [NearestNeighborDescent.jl](https://github.com/dillondaudert/NearestNeighborDescent.jl), a Julia implementation.
* [nn_descent](https://github.com/eskomski/nn_descent), a C implementation.


