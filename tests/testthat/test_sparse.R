library(rnndescent)
context("Graph to sparse")

spm <- nn_to_sparse(ui10_nn4)

expect_equal(spm@i, c(
  2, 5, 9, 2, 4, 6, 1, 4, 6, 1, 7, 8, 2, 6, 7, 0, 2, 9, 1, 2, 4, 3, 4, 6, 1, 3, 7, 0, 2, 5
))
expect_equal(spm@x, c(
  0.7, 0.3464, 0.6782,
  0.4243, 0.4796, 0.3,
  0.4243, 0.3317, 0.2236,
  0.5477, 0.4243, 0.3464,
  0.3317, 0.3464, 0.1732,
  0.3464, 0.5, 0.5831,
  0.3, 0.2236, 0.3464,
  0.4243, 0.1732, 0.4583,
  0.6164, 0.3464, 0.5831,
  0.6782, 1.044, 0.5831
))
expect_equal(spm@p, c(
  0, 3, 6, 9, 12, 15, 18, 21, 24, 27, 30
))
